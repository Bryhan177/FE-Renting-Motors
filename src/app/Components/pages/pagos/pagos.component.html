<div class="min-h-screen bg-gray-900 text-white p-6 rounded-xl">
  
  <div class="mb-8">
    <div class="flex flex-col md:flex-row justify-between items-end gap-4 mb-6">
      <div>
        <h2 class="text-3xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-green-400 to-emerald-400">
          ðŸ’° GestiÃ³n de Pagos
        </h2>
        <p class="text-gray-400 mt-1">Control de pagos semanales y estado de cuenta</p>
      </div>

      <div class="flex items-center gap-3 bg-gray-800 p-2 rounded-xl border border-gray-700">
        <div class="flex items-center gap-2 px-3">
            <span class="text-gray-400 text-sm font-medium">Semana:</span>
            <input [(ngModel)]="semanaSeleccionada" (change)="cambiarSemana()"
               type="week" class="bg-gray-900 border border-gray-600 text-white text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block p-2" />
        </div>
        <button (click)="generarPagosSemanales()"
                class="bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-lg transition shadow-lg shadow-blue-500/20 flex items-center gap-2">
          <span>ðŸ”„</span> Generar
        </button>
      </div>
    </div>

    <!-- Stats Cards -->
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
      <div class="bg-gray-800 p-6 rounded-xl border border-gray-700 relative overflow-hidden group">
        <div class="absolute right-0 top-0 p-4 opacity-10 group-hover:opacity-20 transition transform group-hover:scale-110">
            <span class="text-6xl">âœ…</span>
        </div>
        <p class="text-gray-400 text-sm font-semibold uppercase tracking-wider mb-2">Total Pagado</p>
        <p class="text-4xl font-bold text-white">$ {{ getTotalPagado() | number }}</p>
        <div class="mt-4 flex items-center gap-2">
            <span class="bg-green-500/20 text-green-400 text-xs px-2 py-1 rounded font-bold border border-green-500/30">
                {{ getPagosPagados().length }} pagos
            </span>
            <span class="text-xs text-gray-500">completados</span>
        </div>
      </div>

      <div class="bg-gray-800 p-6 rounded-xl border border-gray-700 relative overflow-hidden group">
        <div class="absolute right-0 top-0 p-4 opacity-10 group-hover:opacity-20 transition transform group-hover:scale-110">
            <span class="text-6xl">ðŸš¨</span>
        </div>
        <p class="text-gray-400 text-sm font-semibold uppercase tracking-wider mb-2">Pendiente por Cobrar</p>
        <p class="text-4xl font-bold text-red-500">$ {{ getTotalPendiente() | number }}</p>
        <div class="mt-4 flex items-center gap-2">
            <span class="bg-red-500/20 text-red-400 text-xs px-2 py-1 rounded font-bold border border-red-500/30">
                {{ getPagosPendientes().length }} pagos
            </span>
            <span class="text-xs text-gray-500">pendientes</span>
        </div>
      </div>

      <div class="bg-gray-800/50 p-6 rounded-xl border border-dashed border-gray-700 flex flex-col justify-center items-center text-center">
        <p class="text-gray-400 text-sm font-semibold uppercase tracking-wider mb-1">Total Esperado</p>
        <p class="text-3xl font-bold text-gray-300">$ {{ (getTotalPagado() + getTotalPendiente()) | number }}</p>
        <p class="text-xs text-gray-500 mt-2">{{ pagos.length }} transacciones esta semana</p>
      </div>
    </div>
  </div>

  <!-- Loading State -->
  <div *ngIf="loading" class="flex flex-col items-center justify-center py-20 text-gray-500">
    <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mb-4"></div>
    <p>Cargando informaciÃ³n de pagos...</p>
  </div>

  <!-- Content -->
  <div *ngIf="!loading" class="grid grid-cols-1 xl:grid-cols-2 gap-8">
    
    <!-- Columna: Pendientes -->
    <div class="space-y-4">
        <div class="flex items-center gap-3 mb-2">
            <div class="w-3 h-8 bg-red-500 rounded-full"></div>
            <h3 class="text-xl font-bold text-white">Pendientes</h3>
            <span class="bg-red-500/20 text-red-400 text-xs px-2 py-1 rounded-full">{{ getPagosPendientes().length }}</span>
        </div>

        <div *ngIf="getPagosPendientes().length === 0" class="bg-gray-800/30 rounded-xl p-8 text-center border border-gray-700/50">
            <p class="text-gray-500">Â¡Todo al dÃ­a! No hay pagos pendientes.</p>
        </div>

        <div *ngFor="let pago of getPagosPendientes()" 
             class="bg-gray-800 rounded-xl p-4 border border-gray-700 hover:border-red-500/50 transition duration-300 group shadow-lg">
            <div class="flex justify-between items-start">
                <div class="flex items-start gap-3">
                    <div class="w-10 h-10 rounded-full bg-gray-700 flex items-center justify-center text-lg font-bold text-gray-300">
                        {{ pago.conductor?.nombre?.charAt(0) || '?' }}
                    </div>
                    <div>
                        <h4 class="font-bold text-white text-lg">{{ pago.conductor?.nombre }} {{ pago.conductor?.apellido }}</h4>
                        <p class="text-xs text-gray-400 font-mono">CC: {{ pago.conductor?.cedula }}</p>
                    </div>
                </div>
                <div class="text-right">
                    <p class="text-2xl font-bold text-red-500">$ {{ pago.monto | number }}</p>
                    <p class="text-xs text-red-400">Sin pagar</p>
                </div>
            </div>
            
            <div class="mt-4 pt-4 border-t border-gray-700 flex justify-between items-center">
                <p class="text-xs text-gray-500">{{ pago.semana }}</p>
                <button (click)="marcarComoPagado(pago)" 
                        class="bg-green-600 hover:bg-green-500 text-white text-sm font-medium py-2 px-4 rounded-lg transition flex items-center gap-2 shadow-lg shadow-green-900/20">
                    <span>ðŸ’³</span> Registrar Pago
                </button>
            </div>
        </div>
    </div>

    <!-- Columna: Pagados -->
    <div class="space-y-4">
        <div class="flex items-center gap-3 mb-2">
            <div class="w-3 h-8 bg-green-500 rounded-full"></div>
            <h3 class="text-xl font-bold text-white">Realizados</h3>
             <span class="bg-green-500/20 text-green-400 text-xs px-2 py-1 rounded-full">{{ getPagosPagados().length }}</span>
        </div>

        <div *ngIf="getPagosPagados().length === 0" class="bg-gray-800/30 rounded-xl p-8 text-center border border-gray-700/50">
            <p class="text-gray-500">AÃºn no hay pagos registrados esta semana.</p>
        </div>

        <div *ngFor="let pago of getPagosPagados()" 
             class="bg-gray-800/50 rounded-xl p-4 border border-gray-700/50 hover:bg-gray-800 transition duration-300 opacity-75 hover:opacity-100">
            <div class="flex justify-between items-center">
                 <div class="flex items-center gap-3">
                    <div class="w-8 h-8 rounded-full bg-green-900/30 flex items-center justify-center text-green-500 text-sm">
                        âœ“
                    </div>
                    <div>
                        <h4 class="font-bold text-gray-300">{{ pago.conductor?.nombre }} {{ pago.conductor?.apellido }}</h4>
                        <p class="text-xs text-gray-500">{{ pago.fechaPago | date:'mediumDate' }}</p>
                    </div>
                </div>
                <div class="text-right">
                    <p class="text-xl font-bold text-green-500">$ {{ pago.monto | number }}</p>
                </div>
            </div>
        </div>
    </div>
  </div>

  <!-- Empty State Total -->
  <div *ngIf="!loading && pagos.length === 0" class="text-center py-12 bg-gray-800/50 rounded-xl border border-gray-700 mt-8">
      <div class="text-6xl mb-4 opacity-50">ðŸ“…</div>
      <h3 class="text-xl font-bold text-white">Semana sin registros</h3>
      <p class="text-gray-400 mt-2 mb-6 max-w-md mx-auto">No se han generado cobros para la semana <strong>{{ semanaSeleccionada }}</strong>.</p>
      <button (click)="generarPagosSemanales()" class="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition">
          Generar Pagos Ahora
      </button>
  </div>

</div>
